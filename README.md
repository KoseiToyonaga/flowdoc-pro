# FlowDoc Pro - 業務フロー&ナレッジ管理システム

React製の業務フロー可視化とナレッジ管理を統合したWebアプリケーション

## ✨ 主な機能

### 🎯 統合機能（v2.0）

#### 1. **3カラムレイアウト**
- **左サイドバー**: プロジェクト一覧とナビゲーション
- **中央パネル**: フローエディター（ReactFlow使用）
- **右パネル**: ドキュメント管理

#### 2. **Excel/Visioスタイル接続テーブル** 📋
- フローの接続関係を表形式で管理
- ドロップダウンでプロセスを簡単選択
- 条件付き分岐の設定（例: はい/いいえ）
- テーブルとビジュアルの双方向同期
- 接続の追加・編集・削除が直感的

#### 3. **プロジェクト管理**
- プロジェクトの作成・削除
- 自動バージョン管理
- プロジェクト切り替え
- LocalStorageでデータ永続化

#### 4. **フローエディター**
- ReactFlowによる高機能なビジュアルエディター
- ドラッグ&ドロップでノード配置
- ノード間を矢印で接続
- プロセスの追加・編集・削除
- ミニマップとズームコントロール
- グリッド背景で位置合わせ簡単

#### 5. **ドキュメント管理**
- **表示タブ**: マークダウンレンダリング表示
- **編集タブ**: リアルタイム編集
- **一覧タブ**: 全ドキュメント一覧

#### 6. **マークダウンエディター**
- 充実したツールバー
  - 見出し（H1, H2, H3）
  - 太字、斜体、取り消し線
  - リスト、番号付きリスト、チェックボックス
  - リンク、コード、コードブロック
- 画像サポート
  - ドラッグ&ドロップ
  - スクリーンショット貼り付け（Ctrl+V）
  - Base64形式で保存

#### 7. **バージョン管理**
- フロー保存時: マイナーバージョンアップ（x.Y.0）
- ドキュメント保存時: パッチバージョンアップ（x.y.Z）
- 自動採番で履歴管理

---

## 🚀 セットアップ方法

### 前提条件
- Node.js (v14以上)
- npm または yarn

### インストール

```bash
# プロジェクトフォルダに移動
cd C:\Users\toyon\Desktop\flow-knowledge-manager

# 依存パッケージをインストール
npm install

# 開発サーバーを起動
npm start
```

ブラウザで `http://localhost:3000` が自動的に開きます。

---

## 📖 使い方

### 1. プロジェクトの作成

1. 左サイドバーの「➕ 新規プロジェクト」をクリック
2. プロジェクト名と説明を入力
3. 「作成」をクリック
4. 自動的に「開始」プロセスが追加されます

### 2. フローの作成

#### プロセスの追加
1. 「➕ プロセス追加」をクリック
2. プロセス名と説明を入力
3. 「追加」をクリック
4. キャンバス上でドラッグして配置

#### プロセスの編集
- プロセスをダブルクリックして編集
- または、右サイドバーの編集ボタン（✏️）をクリック

#### プロセスの接続
- プロセスのエッジをドラッグして別のプロセスに接続
- または、接続テーブルで管理

### 3. 接続テーブルの使用

#### 表示方法
1. ツールバーの「📋 接続テーブル」ボタンをクリック
2. フローエリア上部にテーブルが表示される

#### 接続の追加
1. 「➕ 接続を追加」をクリック
2. 開始プロセスをドロップダウンから選択
3. 終了プロセスをドロップダウンから選択
4. 必要に応じて条件を入力（例: はい、いいえ）
5. フローチャートに自動反映

#### 接続の編集・削除
- ドロップダウンや入力欄を直接編集
- 「削除」ボタンで接続を削除

### 4. ドキュメントの作成

#### 新規作成
1. 右パネルの「一覧」タブをクリック
2. 「➕ 新規ドキュメント」をクリック
3. タイトルを入力して「作成」

#### 編集
1. 「編集」タブに自動切り替え
2. タイトルと内容を入力
3. ツールバーで書式を追加
4. 「💾 保存」をクリック

#### 画像の追加
- スクリーンショットを撮って Ctrl+V で貼り付け
- 画像ファイルをドラッグ&ドロップ
- クリップボードから直接貼り付け

#### 表示
1. 「表示」タブをクリック
2. マークダウンがレンダリングされて表示

---

## 🎨 接続テーブルの活用例

### 承認フロー
```
# | 開始プロセス | → | 終了プロセス | 条件
1 | 申請       | → | 上長承認     | 
2 | 上長承認   | → | 部長承認     | 承認
3 | 上長承認   | → | 差戻し       | 却下
4 | 部長承認   | → | 完了         | 承認
5 | 部長承認   | → | 差戻し       | 却下
```

### 在庫管理フロー
```
# | 開始プロセス | → | 終了プロセス | 条件
1 | 受注受付    | → | 在庫確認     | 
2 | 在庫確認    | → | 判定         | 
3 | 判定        | → | 出荷         | 在庫あり
4 | 判定        | → | 発注         | 在庫なし
5 | 発注        | → | 出荷         | 
```

---

## 🔧 技術スタック

- **React 18** - UIフレームワーク
- **ReactFlow 11** - フロー図作成ライブラリ
- **React Markdown** - マークダウンレンダリング
- **remark-gfm** - GitHub Flavored Markdown対応
- **LocalStorage API** - データ永続化

---

## 📂 プロジェクト構造

```
flow-knowledge-manager/
├── public/
│   └── index.html
├── src/
│   ├── components/
│   │   ├── Sidebar.js / .css           # サイドバー
│   │   ├── FlowEditor.js / .css        # フローエディター
│   │   ├── ConnectionTable.js / .css   # 接続テーブル
│   │   └── DocumentPanel.js / .css     # ドキュメントパネル
│   ├── utils/
│   │   └── storage.js                  # ストレージユーティリティ
│   ├── App.js / .css                   # メインアプリケーション
│   ├── index.js / .css
├── package.json
└── README.md
```

---

## 💡 Tips & ベストプラクティス

### テーブルとビジュアルの使い分け
- **接続テーブル**: 複雑な接続関係の整理、ロジック設計
- **ビジュアル**: レイアウト調整、プレゼンテーション

### 効率的なワークフロー
1. まず接続テーブルで全接続を設定
2. ビジュアルでノード位置を調整
3. 条件分岐をテーブルで追加・修正

### マークダウン活用
- 見出しで構造化
- リストで手順を明確に
- コードブロックで技術詳細を記載
- 画像で視覚的に説明

---

## 🚧 今後の実装予定

### Phase 2
- [ ] 用語集機能（マウスオーバーでツールチップ）
- [ ] レビュー・承認フロー（ドラフト→レビュー→公開）
- [ ] ユーザー管理とログイン機能
- [ ] レビュアー指定機能
- [ ] 公開/非公開設定

### Phase 3
- [ ] ドキュメント一括閲覧画面
- [ ] プロセスへの遷移機能
- [ ] グループ管理
- [ ] 権限管理
- [ ] タスク管理機能

### Phase 4
- [ ] 親子プロセス（階層構造）
- [ ] サブフローの詳細表示
- [ ] データエクスポート（CSV/Excel）
- [ ] バージョン履歴の閲覧
- [ ] ボトルネック分析

---

## 📝 変更履歴

### v2.0 (2025/10/24)
- ✨ 3カラムレイアウトに刷新
- 📋 Excel/Visioスタイル接続テーブル追加
- 🎨 workflow_systemのデザインを統合
- 📄 ドキュメント管理をタブ形式に改善
- 🔄 接続テーブルとビジュアルの双方向同期
- 💾 自動バージョン管理の実装

### v1.0 (MVP)
- 基本的なプロジェクト管理
- ReactFlowによるフローエディター
- マークダウンエディター
- 画像貼り付け対応

---

## ⚠️ 注意事項

- データはブラウザのLocalStorageに保存されます
- ブラウザのキャッシュをクリアするとデータが消える可能性があります
- 現在は単一ユーザー向けの実装です
- 本番環境ではバックエンドAPIとの連携を推奨します

---

## 📞 サポート

ご質問やフィードバックがあれば、お気軽にお問い合わせください！

**🎊 v2.0でworkflow_systemの良い部分を統合し、さらに使いやすくなりました！**
